<script type="module" defer>
  
  window.addEventListener('load', () => {
    window.customFunctions.salesforceFormSubmission = async ({
      firstName = 'Foodie',
      lastName = 'Pages',
      email = 'example@gmail.com',
      phone = '514-555-5555',
      company = 'Foodie Pages',
      leadSource = 'Foodie Pages Frontend',
    }) => {

      {% comment %} const backendURL = 'https://foodie-pages-backend.herokuapp.com' {% endcomment %}
      const backendURL = 'http://localhost:8080'

      const url = `${backendURL}/api/create-salesforce-lead`

      const data = {
        firstName,
        lastName,
        email,
        phone,
        company,
        leadSource,
      }

      try {
        const response = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        })
  
        const result = await response.json()
  
        return result
      } catch (error) {
        console.error(error)
      }
    }
  })

</script>
