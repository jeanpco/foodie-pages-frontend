{{ 'cf-product-card.css' | asset_url | stylesheet_tag }}

<script type="module">
  
  window.cfProductCard = (data) => {
    const { product } = data;
    const numberOfVariant = product.variants.length;
    const isDonation = product.tags.includes('donation');

    return `
      <div class="cf-product-card swiper-slide" data-js-element="cf-product-card" data-product-id="${product.id}" data-product-tags="${product.tags}">
        <div class="cf-product-card_image-container margin-bottom margin-small">
          <div class="cf-product-card_checked">
            {% render 'campaign-form_icon-checked' %}
          </div>
          <img data-js-element="cf-product-card_image" src="${product.image.src}" class="cf-product-card_image" alt="${product.image.alt}">
          <div class="cf-product-card_details display-flex gap-0-5 align-items-center">
            {% comment %} if has 1 variant {% endcomment %}
            ${numberOfVariant === 1 && !isDonation ? `
              <button data-js-element="details" class="button secondary">
                <span>
                  <span>Details</span>
                </span>
              </button>
              <button data-js-element="quick-add" class="button">
                <span class="align-items-center gap-0-5" style="display: flex;">
                  {% render 'campaign-form_icon-plus' %}
                  <span>Quick add</span>
                </span>
              </button>` 
              {% comment %} if has multiple variant (>= 2) {% endcomment %}
              : 
              `<button data-js-element="details" class="button">
                <span class="align-items-center gap-0-5" style="display: flex;">
                  <span>Details |</span>
                  {% render 'campaign-form_icon-plus' %}
                  <span>Add</span>
                </span>
              </button>
            `}
          </div>
        </div>
        <h4 data-js-element="cf-product-card_title font-weight-semibold" class="cf-product-card_title heading-style-h6 padding-horizontal padding-small">
          ${product.title}
        </h4>
      </div>
    `;
  };

</script>
